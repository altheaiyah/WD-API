<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Amiibo | Mario</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">
  <div class="container-fluid navbar navbar-expand-lg fixed-top px-5" style="background-color: #C8102E;">
    <a class="navbar-brand" href="#">
      <img src="img/Logo_Mario_Series.svg" height="40" alt="Mario Series Logo">
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavs">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavs">
      <ul class="navbar-nav ms-auto align-items-center gap-2 w-100 justify-content-end">
        <li class="nav-item"><button class="btn border btn-light btn-sm rounded-5" onclick="amiiboFilter('all')">All Amiibos</button></li>
        <li class="nav-item"><button class="btn border btn-light btn-sm rounded-5" onclick="amiiboFilter('Card')">Cards</button></li>
        <li class="nav-item"><button class="btn border btn-light btn-sm rounded-5" onclick="amiiboFilter('Figure')">Figures</button></li>
        <li class="nav-item"><button class="btn border btn-light btn-sm rounded-5" onclick="amiiboFilter('Band')">Wristbands</button></li>
        <li class="nav-item"><button class="btn border btn-light btn-sm rounded-5" onclick="location.href='index.html'">Home</button></li>
      </ul>
    </div>
  </div>

  <div class="container mt-5 pt-5">
    <div class="row justify-content-center mb-5">
      <img src="img/Logo_Amiibo.svg" height="40" alt="Amiibo Logo">
    </div>
    <div class="row" id="contentArea"></div>
  </div>

  <div class="container my-5">
    <div class="row">
      <div class="col d-flex justify-content-center">
        <button class="btn btn-secondary me-2" onclick="prevPage()">&laquo; Prev</button>
        <div id="pageText" class="align-self-center mx-2">Page 1</div>
        <button class="btn btn-secondary ms-2" onclick="nextPage()">Next &raquo;</button>
      </div>
    </div>
  </div>

  <div>
    <footer class="py-3" style="border-top: 1px solid darkgray;">
      <div class="container text-center">
        <p class="small mb-0 text-muted ">
          <strong>Nintendo Amiibo Series</strong><br>All images and content belong to their respective owners and are used for educational purposes only.
        </p>
      </div>
    </footer>
  </div>

  <script src="home.js"></script>
  <script>
    var contentArea = document.getElementById("contentArea");
    var pageText = document.getElementById("pageText");

    let amiibos = [];
    let filteredAmiibos = [];
    let page = 1;
    const pageSize = 12;

    async function displayAmiibos() {
      const response = await fetch("https://www.amiiboapi.com/api/amiibo/?gameseries=Mario");
      const amiiboData = await response.json();
      amiibos = amiiboData.amiibo;
      filteredAmiibos = amiibos;
      getAmiibos();
    }

    function getAmiibos() {
      contentArea.innerHTML = "";
      pageText.innerHTML = "Page " + page;

      const start = (page - 1) * pageSize;
      const end = start + pageSize;

      filteredAmiibos.slice(start, end).forEach(a => {
        contentArea.innerHTML += `
          <div class="col-6 col-md-4 col-lg-3 mb-3">
            <div class="card bg-light p-3 rounded-3 text-center shadow-sm h-100">
              <img class="w-100 mb-2" src="${a.image}" >
              <div class="h5 mb-1">${a.name}</div>
              <div class="d-flex justify-content-center flex-wrap gap-1">
                <span class="badge" style="background-color: #FBD000; color: #000000;">${a.amiiboSeries}</span>
                <span class="badge" style="background-color: #C8102E;">${a.type}</span>
              </div>
              <div class="mt-2 text-muted"><small>Released:
                ${a.release.na ? a.release.na : 'N/A'}
              </small></div>
            </div>
          </div>
        `;
      });
    }

    function amiiboFilter(type) {
      page = 1;
      if (type === 'all') {
        filteredAmiibos = amiibos;
      } else {
        filteredAmiibos = amiibos.filter(a => a.type === type);
      }
      getAmiibos();
    }

    function prevPage() {
      if (page > 1) {
        page--;
        getAmiibos();
      }
    }
    function nextPage() {
      if (page * pageSize < filteredAmiibos.length) {
        page++;
        getAmiibos();
      }
    }
    displayAmiibos();
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>